import{j as t,w as De,S as Se,k as h}from"./index-BLgrCvPv.js";import{r as g}from"./vendor-DTxvXAp4.js";import{f as ke,q as Ce,s as Oe,t as Me,v as Te,w as Fe,x as _e}from"./api-DSYCruPD.js";import{r as Ee,D as R,e as Ae}from"./el-BOwI4aVl.js";import{c as ae}from"./createLucideIcon-EwlXFdUa.js";import"./floating-ui.dom-BEEQndcC.js";/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],We=ae("calendar-clock",Be);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Le=ae("chevron-left",$e);/**
 * @license lucide-react v0.506.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ze=ae("chevron-right",Re),Ie=["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"],de=r=>{const n=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),u=String(r.getDate()).padStart(2,"0");return`${n}-${o}-${u}`},Pe=r=>new Date(r).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit"}),qe=r=>{const n=new Date(r.getFullYear(),r.getMonth(),r.getDate()),u=(n.getDay()+6)%7;return n.setDate(n.getDate()-u),n},He=(r,n)=>{const o=[];for(let u=0;u<n;u+=1){const d=new Date(r.getTime());d.setDate(d.getDate()+u);const b=de(d),c=Ie[(d.getDay()+6)%7];o.push({date:d,dateKey:b,dayName:c,formatted:d.toLocaleDateString("el-GR",{day:"2-digit",month:"2-digit"})})}return o},Ve=r=>{const n=new Map;return r.forEach(o=>{if(!(o!=null&&o.start))return;const u=new Date(o.start),d=de(u);n.has(d)||n.set(d,[]),n.get(d).push(o)}),n},Ye=({events:r=[],startDate:n,weeks:o=4})=>{const[u,d]=g.useState(null),b=g.useMemo(()=>{const f=n?new Date(n):new Date;return f.setHours(0,0,0,0),qe(f)},[n]),c=g.useMemo(()=>He(b,o*7),[b,o]),v=g.useMemo(()=>Ve(r),[r]);return t.jsx("div",{className:"auto-calendar",children:t.jsx("div",{className:"auto-calendar-grid",children:c.map(({dateKey:f,dayName:D,formatted:F})=>{const y=v.get(f)||[];return t.jsxs("div",{className:"auto-calendar-cell",children:[t.jsxs("div",{className:"auto-calendar-cell__header",children:[t.jsx("span",{className:"auto-calendar-cell__day",children:D}),t.jsx("span",{className:"auto-calendar-cell__date",children:F})]}),t.jsx("div",{className:"auto-calendar-cell__body",children:y.length===0?t.jsx("div",{className:"auto-calendar-empty",children:"Χωρίς ραντεβού"}):y.sort((p,N)=>new Date(p.start)-new Date(N.start)).map(p=>{const N=u===p.id,j=p.barber==="ΛΕΜΟ"?" auto-calendar-event--lemo":p.barber==="ΦΟΡΟΥ"?" auto-calendar-event--forou":"";return t.jsxs("div",{className:`auto-calendar-event${j}${N?" auto-calendar-event--selected":""}`,role:"button",tabIndex:0,onClick:()=>{d(k=>k===p.id?null:p.id)},onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),d(A=>A===p.id?null:p.id))},children:[t.jsx("div",{className:"auto-calendar-event__title",children:p.title}),N&&t.jsxs("div",{className:"auto-calendar-event__meta",children:[t.jsxs("span",{className:"auto-calendar-event__time",children:["Ώρα: ",Pe(p.start)]}),p.durationMin!==void 0&&t.jsxs("span",{className:"auto-calendar-event__duration",children:["· Διάρκεια: ",p.durationMin,"’"]})]})]},p.id)})})]},f)})})})};Ee("el",Ae);const Ke=(r,n)=>{const o=new Date(r.getTime());return o.setDate(o.getDate()+n),o},X=(r,n)=>Ke(r,n*7),Ge=(r,n)=>{const o=new Date(r.getTime()),u=o.getDay(),d=(Number(n)-u+7)%7;return o.setDate(o.getDate()+d),o},I=r=>{const n=r instanceof Date?new Date(r.getTime()):new Date(r);n.setHours(0,0,0,0);const u=(n.getDay()+6)%7;return n.setDate(n.getDate()-u),n},Ue=[{value:"ΛΕΜΟ",label:"ΛΕΜΟ"},{value:"ΦΟΡΟΥ",label:"ΦΟΡΟΥ"}],Z=[{value:0,label:"Κυριακή / Sunday"},{value:1,label:"Δευτέρα / Monday"},{value:2,label:"Τρίτη / Tuesday"},{value:3,label:"Τετάρτη / Wednesday"},{value:4,label:"Πέμπτη / Thursday"},{value:5,label:"Παρασκευή / Friday"},{value:6,label:"Σάββατο / Saturday"}],ee=[{value:1,label:"Κάθε εβδομάδα / Every week"},{value:2,label:"Ανά 2 εβδομάδες / Every 2 weeks"},{value:3,label:"Ανά 3 εβδομάδες / Every 3 weeks"},{value:4,label:"Ανά 4 εβδομάδες / Every 4 weeks"},{value:5,label:"Ανά 5 εβδομάδες / Every 5 weeks"}],O=r=>r?new Date(r.getTime()-r.getTimezoneOffset()*6e4).toISOString().slice(0,10):"",S=r=>{if(!r)return null;const n=r.split("-").map(Number);if(n.length!==3||n.some(b=>Number.isNaN(b)))return null;const[o,u,d]=n;return new Date(o,u-1,d)},P=r=>{if(!r)return;const n=S(r);if(n)return new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())).toISOString()},te=(r,n="09:00")=>{if(!r)return n;if(typeof r=="string"){const o=r.match(/(\d{1,2}):(\d{2})/);if(o){const u=String(Number(o[1])%24).padStart(2,"0"),d=o[2];return`${u}:${d}`}}return n},E={customerName:"",phoneNumber:"",barber:"ΛΕΜΟ",weekday:1,timeOfDay:"09:00",durationMin:40,cadenceWeeks:1,startFrom:O(new Date),until:"",maxOccurrences:"5"},C=r=>{if(!r)return"";if(typeof r=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(r))return r;try{return O(new Date(r))}catch{return""}}return r instanceof Date?O(r):""},at=()=>{const[r,n]=g.useState([]),[o,u]=g.useState(!1),[d,b]=g.useState(!1),[c,v]=g.useState(E),[f,D]=g.useState(null),[F,y]=g.useState(null),[p,N]=g.useState(!1),[j,k]=g.useState({from:O(new Date),to:""}),[A,ue]=g.useState([]),q=g.useRef(null),H=g.useRef(null),V=g.useMemo(()=>De(Se),[]),[Y,re]=g.useState(()=>I(new Date)),B=async()=>{u(!0);try{const e=await Ce(),a=Array.isArray(e)?e:(e==null?void 0:e.data)||[];n(a.map(s=>({...s,timeOfDay:te(s.timeOfDay,"09:00")})))}catch(e){console.error(e),h.error(e.message||"Αποτυχία φόρτωσης επαναλαμβανόμενων πελατών.")}finally{u(!1)}};g.useEffect(()=>{B(),(async()=>{try{const e=await ke();ue(Array.isArray(e)?e:[])}catch(e){console.error("Failed loading customer directory",e)}})()},[]);const me=g.useMemo(()=>{const e=new Map;return A.forEach(a=>{a!=null&&a.name&&e.set(a.name.trim().toLowerCase(),a)}),e},[A]),xe=g.useMemo(()=>{const a=I(Y),s=X(a,12),i=[];return r.forEach(l=>{if(!l)return;const _=Number(l.cadenceWeeks)||1,W=Number(l.durationMin)||40;let $=Number(l.weekday);Number.isFinite($)||($=0);const[K,G]=te(l.timeOfDay,"09:00").split(":").map(Number),L=l.startFrom&&C(l.startFrom)?S(C(l.startFrom)):new Date(a.getTime());if(!L)return;L.setHours(K||0,G||0,0,0);let T=Ge(L,$);const ce=l.until?S(C(l.until)):null,z=l.maxOccurrences?Number(l.maxOccurrences):l.until?1/0:5;let U=0;const je=new Set((l.skippedOccurrences||[]).map(m=>M(m)).filter(Boolean).map(m=>m.getTime())),we=new Map((l.occurrenceOverrides||[]).map(m=>{const x=M(m==null?void 0:m.originalStart),J=M(m==null?void 0:m.overrideStart);return!x||!J?null:[x.getTime(),{startMs:J.getTime(),duration:m==null?void 0:m.durationMin,barber:m==null?void 0:m.barber}]}).filter(Boolean));for(;T<=s&&!(ce&&T>ce);){const m=T.getTime(),x=we.get(m);if(!je.has(m)){if(z&&U>=z)break;const ie=(x==null?void 0:x.startMs)??m,Q=new Date(ie),ve=new Date(ie+((x==null?void 0:x.duration)??W)*6e4);Q>=a&&Q<=s&&i.push({id:`${l._id||"auto"}-${m}`,title:l.customerName||"Ραντεβού",start:Q,end:ve,barber:(x==null?void 0:x.barber)||l.barber||"ΛΕΜΟ",type:"appointment",autoCustomerId:l._id,originalStart:new Date(m),hasOverride:!!x,overrideBarber:(x==null?void 0:x.barber)||null,overrideDuration:(x==null?void 0:x.duration)??null,durationMin:(x==null?void 0:x.duration)??W}),U+=1}if(T=X(T,_),z&&U>=z)break}}),i},[r,Y]),ge=()=>{D(null),y(null),v(E),b(!0)},se=e=>{re(a=>I(X(a,e)))},pe=()=>{re(I(new Date))};function M(e){if(!e)return null;if(e instanceof Date){const s=new Date(e.getTime());return s.setSeconds(0,0),s}if(typeof e=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const i=S(e);return i?(i.setSeconds(0,0),i):null}const s=new Date(e);return Number.isNaN(s.getTime())?null:(s.setSeconds(0,0),s)}const a=new Date(e);return Number.isNaN(a.getTime())?null:(a.setSeconds(0,0),a)}function be(e,a){if(!e||!a)return null;const s=S(e);if(!s)return null;const[i,l]=a.split(":").map(Number);return s.setHours(i||0,l||0,0,0),s}const ne=(e,a,s={})=>{D(e._id);const i=!!a;let l=i?M(a):null,_=s.originalStart?M(s.originalStart):null;!_&&l&&(_=new Date(l.getTime())),!l&&i&&(l=e.startFrom?M(e.startFrom):null),y(_&&l?{originalStart:_.toISOString()}:null);const W=l||(e.startFrom?new Date(e.startFrom):new Date),$=W.toISOString().slice(0,10),K=i?oe(l||new Date(W)):te(e.timeOfDay,"09:00"),G=l?(l.getDay()+7)%7:e.weekday??1,L=s.overrideBarber||e.barber||"ΛΕΜΟ",T=s.overrideDuration??e.durationMin??40;v({customerName:e.customerName||"",phoneNumber:e.phoneNumber||"",barber:L,weekday:G,timeOfDay:K,durationMin:T,cadenceWeeks:e.cadenceWeeks??1,startFrom:$,until:C(e.until),maxOccurrences:e.maxOccurrences?String(e.maxOccurrences):""}),b(!0)},le=async e=>{if((await V.fire({title:"Είστε σίγουρος;",text:`Θα αφαιρεθεί ο επαναλαμβανόμενος πελάτης ${e.customerName}.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#a78bfa",cancelButtonColor:"#64748b",confirmButtonText:"Ναι, διαγραφή!",cancelButtonText:"Ακύρωση"})).isConfirmed)try{await Oe(e._id),V.fire({title:"✅ Διαγραφή",text:"Ο επαναλαμβανόμενος πελάτης αφαιρέθηκε με επιτυχία.",icon:"success",timer:1600,showConfirmButton:!1}),B()}catch(s){console.error(s),V.fire({title:"Σφάλμα",text:s.message||"Αποτυχία διαγραφής.",icon:"error"})}},w=(e,a)=>{v(s=>{const i={...s,[e]:a};if(e==="customerName"){const l=me.get(String(a).trim().toLowerCase());l!=null&&l.phoneNumber&&(i.phoneNumber=l.phoneNumber)}return i})};function fe(e){if(!e)return null;const[a,s]=e.split(":").map(Number);return new Date(1970,0,1,a||0,s||0,0,0)}function oe(e){if(!e)return"";const a=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0");return`${a}:${s}`}const he=()=>{const e=P(c.until);let a=c.maxOccurrences?Number(c.maxOccurrences):void 0;return(!a||Number.isNaN(a))&&!e&&(a=5),{customerName:c.customerName.trim(),phoneNumber:c.phoneNumber.trim(),barber:c.barber,weekday:Number(c.weekday),timeOfDay:c.timeOfDay,durationMin:Number(c.durationMin)||40,cadenceWeeks:Number(c.cadenceWeeks)||1,startFrom:P(c.startFrom),until:e,maxOccurrences:a}},ye=async e=>{if(e.preventDefault(),F&&f){const s=M(F.originalStart),i=be(c.startFrom,c.timeOfDay);if(!s||!i){h.error("Η ημερομηνία και η ώρα είναι υποχρεωτικές για την ενημέρωση.");return}try{await Me(f,{occurrence:s.toISOString(),overrideStart:i.toISOString(),durationMin:Number(c.durationMin)||40,barber:c.barber}),h.success("Η εμφάνιση ενημερώθηκε μόνο για αυτή την ημερομηνία."),b(!1),D(null),y(null),v(E),B()}catch(l){console.error(l),h.error(l.message||"Αποτυχία ενημέρωσης εμφάνισης.")}return}const a=he();if(!a.customerName||!a.phoneNumber){h.error("Το όνομα και το τηλέφωνο είναι υποχρεωτικά.");return}try{f?(await Te(f,a),h.success("Ο πελάτης ενημερώθηκε.")):(await Fe(a),h.success("Ο πελάτης δημιουργήθηκε.")),b(!1),D(null),y(null),v(E),B()}catch(s){console.error(s),h.error(s.message||"Αποτυχία αποθήκευσης.")}};g.useEffect(()=>{if(!d&&!p)return;const e=a=>{const s=a.target;s.closest&&s.closest(".react-datepicker")||(d&&q.current&&!q.current.contains(s)&&(b(!1),D(null),y(null),v(E)),p&&H.current&&!H.current.contains(s)&&N(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[d,p]);const Ne=async e=>{if(e.preventDefault(),!j.from){h.error("Η ημερομηνία έναρξης είναι υποχρεωτική.");return}try{const a={from:P(j.from),to:j.to?P(j.to):void 0,dryRun:!1};await _e(a),h.success("Οι επαναλαμβανόμενοι πελάτες προστέθηκαν."),B(),N(!1)}catch(a){console.error(a),h.error(a.message||"Αποτυχία δημιουργίας ραντεβού.")}};return t.jsxs("div",{className:"h-full overflow-y-auto text-gray-100",children:[t.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 px-4 sm:px-6 lg:px-8 py-6",children:[t.jsxs("header",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Επαναλαμβανόμενοι Πελάτες"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Διαχειριστείτε τις επαναλαμβανόμενες κρατήσεις και δημιουργήστε ραντεβού μαζικά."})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full sm:w-auto",children:[t.jsx("button",{onClick:ge,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition w-full sm:w-auto",children:"Νέος Πελάτης"}),t.jsx("button",{onClick:()=>{N(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition w-full sm:w-auto",children:"Push στο Ημερολόγιο"})]})]}),t.jsxs("section",{className:"bg-gray-800 border border-gray-700 rounded-xl shadow-lg p-3 sm:p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("h2",{className:"text-lg font-semibold",children:"Λίστα Πελατών"})}),t.jsx("div",{className:"hidden sm:block overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-left text-sm",children:[t.jsx("thead",{className:"bg-gray-700 text-gray-200 uppercase text-xs",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2",children:"Πελάτης"}),t.jsx("th",{className:"px-3 py-2",children:"Barber"}),t.jsx("th",{className:"px-3 py-2",children:"Ημέρα"}),t.jsx("th",{className:"px-3 py-2",children:"Ώρα"}),t.jsx("th",{className:"px-3 py-2",children:"Συχνότητα"}),t.jsx("th",{className:"px-3 py-2",children:"Από"}),t.jsx("th",{className:"px-3 py-2",children:"Έως"}),t.jsx("th",{className:"px-3 py-2 text-right",children:"Ενέργειες"})]})}),t.jsx("tbody",{children:o?t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-gray-400",children:"Φόρτωση..."})}):r.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-gray-400",children:"Δεν υπάρχουν επαναλαμβανόμενοι πελάτες."})}):r.map(e=>{var a,s;return t.jsxs("tr",{className:"border-t border-gray-700 hover:bg-gray-750 transition",children:[t.jsxs("td",{className:"px-3 py-2",children:[t.jsx("div",{className:"font-medium text-gray-100",children:e.customerName}),t.jsx("div",{className:"text-xs text-gray-400",children:e.phoneNumber})]}),t.jsx("td",{className:"px-3 py-2",children:e.barber}),t.jsx("td",{className:"px-3 py-2",children:((a=Z.find(i=>i.value===e.weekday))==null?void 0:a.label)||e.weekday}),t.jsx("td",{className:"px-3 py-2",children:e.timeOfDay}),t.jsx("td",{className:"px-3 py-2",children:((s=ee.find(i=>i.value===e.cadenceWeeks))==null?void 0:s.label)||`${e.cadenceWeeks} εβδομάδες`}),t.jsx("td",{className:"px-3 py-2 text-xs text-gray-400",children:e.startFrom?C(e.startFrom):"-"}),t.jsx("td",{className:"px-3 py-2 text-xs text-gray-400",children:e.until?C(e.until):"-"}),t.jsxs("td",{className:"px-3 py-2 text-right space-x-2",children:[t.jsx("button",{className:"text-blue-400 hover:text-blue-300 text-sm",onClick:()=>ne(e),children:"Επεξεργασία"}),t.jsx("button",{className:"text-rose-400 hover:text-rose-300 text-sm",onClick:()=>le(e),children:"Διαγραφή"})]})]},e._id)})})]})}),t.jsx("div",{className:"sm:hidden space-y-3",children:o?t.jsx("div",{className:"rounded-xl border border-gray-700 bg-gray-900 p-4 text-center text-gray-400",children:"Φόρτωση..."}):r.length===0?t.jsx("div",{className:"rounded-xl border border-gray-700 bg-gray-900 p-4 text-center text-gray-400",children:"Δεν υπάρχουν επαναλαμβανόμενοι πελάτες."}):r.map(e=>{var a,s;return t.jsxs("article",{className:"rounded-xl border border-gray-700 bg-gray-900 p-4 space-y-3 shadow-inner",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-base font-semibold text-gray-100",children:e.customerName}),t.jsx("div",{className:"text-xs text-gray-400",children:e.phoneNumber})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs text-gray-300",children:[t.jsx("span",{className:"font-medium text-gray-400",children:"Barber"}),t.jsx("span",{children:e.barber}),t.jsx("span",{className:"font-medium text-gray-400",children:"Ημέρα"}),t.jsx("span",{children:((a=Z.find(i=>i.value===e.weekday))==null?void 0:a.label)||e.weekday}),t.jsx("span",{className:"font-medium text-gray-400",children:"Ώρα"}),t.jsx("span",{children:e.timeOfDay}),t.jsx("span",{className:"font-medium text-gray-400",children:"Συχνότητα"}),t.jsx("span",{children:((s=ee.find(i=>i.value===e.cadenceWeeks))==null?void 0:s.label)||`${e.cadenceWeeks} εβδομάδες`}),t.jsx("span",{className:"font-medium text-gray-400",children:"Έναρξη"}),t.jsx("span",{children:e.startFrom?C(e.startFrom):"-"}),t.jsx("span",{className:"font-medium text-gray-400",children:"Λήξη"}),t.jsx("span",{children:e.until?C(e.until):"-"})]}),t.jsxs("div",{className:"flex flex-col gap-2 pt-3",children:[t.jsx("button",{className:"w-full bg-blue-500/15 text-blue-100 border border-blue-400/40 px-3 py-2 rounded-lg text-xs font-medium hover:bg-blue-500/25",onClick:()=>ne(e),children:"Επεξεργασία"}),t.jsx("button",{className:"w-full bg-rose-500/15 text-rose-100 border border-rose-400/40 px-3 py-2 rounded-lg text-xs font-medium hover:bg-rose-500/25",onClick:()=>le(e),children:"Διαγραφή"})]})]},e._id)})})]}),t.jsxs("section",{className:"rounded-xl",children:[t.jsxs("div",{className:"flex flex-col gap-3 mb-4 px-1 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-base sm:text-lg font-semibold text-gray-100",children:[t.jsx(We,{size:18,className:"text-purple-300"}),"Προβολή στο Ημερολόγιο"]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-400 sm:hidden",children:"Υπολογισμοί βασισμένοι στους αποθηκευμένους πελάτες"}),t.jsx("span",{className:"hidden text-xs text-gray-400 sm:inline",children:"Υπολογισμοί βασισμένοι στους αποθηκευμένους πελάτες"}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("button",{type:"button",onClick:()=>se(-4),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-gray-600 text-gray-200 hover:bg-gray-700","aria-label":"Προηγούμενη εβδομάδα",children:t.jsx(Le,{size:18})}),t.jsx("button",{type:"button",onClick:pe,className:"rounded-full border border-purple-500 px-3 py-1 text-xs uppercase tracking-wide text-purple-200 hover:bg-purple-600/20",children:"Σήμερα"}),t.jsx("button",{type:"button",onClick:()=>se(4),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-gray-600 text-gray-200 hover:bg-gray-700","aria-label":"Επόμενη εβδομάδα",children:t.jsx(ze,{size:18})})]})]})]}),t.jsx("div",{className:"h-[520px]",children:t.jsx(Ye,{events:xe,startDate:Y})})]})]}),d&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center px-3 sm:px-4 py-6",children:t.jsxs("div",{ref:q,className:"w-full max-w-xl bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl p-4 sm:p-6 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:f?"Επεξεργασία Πελάτη":"Νέος Επαναλαμβανόμενος Πελάτης"}),t.jsx("button",{onClick:()=>{b(!1),D(null)},className:"text-gray-400 hover:text-gray-200 text-xl",children:"×"})]}),F&&t.jsxs("div",{className:"mb-4 rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-100",children:["Η αλλαγή ημερομηνίας/ώρας θα εφαρμοστεί μόνο στο ραντεβού της"," ",new Date(F.originalStart).toLocaleString("el-GR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),". Οι υπόλοιπες εμφανίσεις θα παραμείνουν ως έχουν."]}),t.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",onSubmit:ye,children:[t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Όνομα Πελάτη",t.jsx("input",{type:"text",className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",value:c.customerName,onChange:e=>w("customerName",e.target.value),required:!0,list:"known-customers"}),t.jsx("datalist",{id:"known-customers",children:A.map(e=>t.jsx("option",{value:e.name,children:e.phoneNumber},e._id||e.name))})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Τηλέφωνο",t.jsx("input",{type:"tel",className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",value:c.phoneNumber,onChange:e=>w("phoneNumber",e.target.value),required:!0})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Barber",t.jsx("select",{className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",value:c.barber,onChange:e=>w("barber",e.target.value),children:Ue.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Ημέρα",t.jsx("select",{className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",value:c.weekday,onChange:e=>w("weekday",Number(e.target.value)),children:Z.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Ώρα",t.jsx(R,{selected:fe(c.timeOfDay),onChange:e=>w("timeOfDay",e?oe(new Date(e.getTime())):c.timeOfDay),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:5,timeCaption:"Ώρα",dateFormat:"hh:mm aa",locale:"el",className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 text-[#a78bfa]",calendarClassName:"!bg-[#161a23] !text-[#ede9fe] !rounded-lg !border !border-[#a78bfa] !shadow-lg",wrapperClassName:"w-full",placeholderText:"Επιλέξτε ώρα",timeClassName:()=>"!bg-[#181a23] !text-[#ede9fe] !border-b !border-[#1f1f2d]",required:!0})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Διάρκεια (λεπτά)",t.jsx("input",{type:"number",min:5,max:600,className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",value:c.durationMin,onChange:e=>w("durationMin",e.target.value)})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Συχνότητα",t.jsx("select",{className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",value:c.cadenceWeeks,onChange:e=>w("cadenceWeeks",Number(e.target.value)),children:ee.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Πλήθος ραντεβού",t.jsx("input",{type:"number",min:1,max:52,list:"preset-occurrences",placeholder:"Επιλέξτε ή πληκτρολογήστε",className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500",value:c.maxOccurrences,onChange:e=>w("maxOccurrences",e.target.value)}),t.jsxs("datalist",{id:"preset-occurrences",children:[t.jsx("option",{value:"1",children:"1"}),t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"10",children:"10"}),t.jsx("option",{value:"20",children:"20"})]})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Έναρξη",t.jsx(R,{selected:c.startFrom?S(c.startFrom):null,onChange:e=>w("startFrom",e?O(e):""),dateFormat:"dd/MM/yyyy",locale:"el",className:"bg-[#181a23] border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 text-[#a78bfa]",calendarClassName:"!bg-[#161a23] !text-[#ede9fe] !rounded-lg !border !border-[#a78bfa]",wrapperClassName:"w-full",placeholderText:"Επιλέξτε ημερομηνία"})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Λήξη (προαιρετικό)",t.jsx(R,{selected:c.until?S(c.until):null,onChange:e=>w("until",e?O(e):""),dateFormat:"dd/MM/yyyy",locale:"el",className:"bg-[#181a23] border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 text-[#a78bfa]",calendarClassName:"!bg-[#161a23] !text-[#ede9fe] !rounded-lg !border !border-[#a78bfa]",wrapperClassName:"w-full",placeholderText:"Επιλέξτε ημερομηνία",isClearable:!0})]}),t.jsxs("div",{className:"col-span-1 sm:col-span-2 flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-3",children:[t.jsx("button",{type:"button",onClick:()=>{b(!1),D(null),y(null),v(E)},className:"w-full sm:w-auto px-4 py-2 rounded-lg border border-gray-600 text-gray-300 hover:bg-gray-800",children:"Άκυρο"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white",children:"Αποθήκευση"})]})]})]})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center px-4",children:t.jsxs("div",{ref:H,className:"w-full max-w-lg bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Push στο Ημερολόγιο"}),t.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-200 text-xl",children:"×"})]}),t.jsxs("form",{className:"space-y-4",onSubmit:Ne,children:[t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Από",t.jsx(R,{selected:j.from?S(j.from):null,onChange:e=>k(a=>({...a,from:e?O(e):""})),dateFormat:"dd/MM/yyyy",locale:"el",className:"bg-[#181a23] border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 text-[#a78bfa]",calendarClassName:"!bg-[#161a23] !text-[#ede9fe] !rounded-lg !border !border-[#a78bfa]",wrapperClassName:"w-full",placeholderText:"Επιλέξτε ημερομηνία",required:!0})]}),t.jsxs("label",{className:"flex flex-col text-sm gap-1",children:["Έως (προαιρετικό)",t.jsx(R,{selected:j.to?S(j.to):null,onChange:e=>k(a=>({...a,to:e?O(e):""})),dateFormat:"dd/MM/yyyy",locale:"el",className:"bg-[#181a23] border border-gray-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 text-[#a78bfa]",calendarClassName:"!bg-[#161a23] !text-[#ede9fe] !rounded-lg !border !border-[#a78bfa]",wrapperClassName:"w-full",placeholderText:"Επιλέξτε ημερομηνία",isClearable:!0})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 rounded-lg border border-gray-600 text-gray-300 hover:bg-gray-800",children:"Άκυρο"}),t.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white",children:"Εκτέλεση"})]})]})]})})]})};export{at as default};
