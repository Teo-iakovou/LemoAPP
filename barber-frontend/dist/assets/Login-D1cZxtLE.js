import{u as x,j as e}from"./index-ljsycxTj.js";import{r as a}from"./vendor-DTxvXAp4.js";const f="http://localhost:5001/api",y=({setAuth:c})=>{const[r,h]=a.useState(""),[o,m]=a.useState(""),[i,n]=a.useState(null),[l,d]=a.useState(!1),p=x(),g=async t=>{if(t.preventDefault(),n(null),!r||!o){n("Both username and password are required.");return}try{d(!0);const s=await fetch(`${f}/auth/signin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:o})}),u=await s.json();if(!s.ok)throw s.status===400?new Error("Invalid username or password."):s.status===500?new Error("Server error. Please try again later."):new Error(u.message||"Login failed.");localStorage.setItem("token",u.token),c(!0),p("/")}catch(s){n(s.message||"An unexpected error occurred.")}finally{d(!1)}};return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("form",{onSubmit:g,className:"p-6 bg-white rounded shadow-md w-full max-w-sm",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"ΣΥΝΔΕΣΗ"}),i&&e.jsx("p",{className:"text-red-500 mb-4",children:i}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"ΟΝΟΜΑ ΧΡΗΣΤΗ"}),e.jsx("input",{type:"text",value:r,onChange:t=>h(t.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Εισάγετε όνομα χρήστη",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"ΚΩΔΙΚΟΣ"}),e.jsx("input",{type:"password",value:o,onChange:t=>m(t.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Εισάγετε κωδικό",required:!0})]}),e.jsx("button",{type:"submit",className:`w-full p-2 rounded ${l?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,disabled:l,children:l?"Loading...":"ΣΥΝΔΕΣΗ"})]})})};export{y as default};
